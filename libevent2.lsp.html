<!DOCTYPE HTML PUBLIC "HTML 4.01 Transitional">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>libevent2.lsp</title>

<link rel="stylesheet" type="text/css" href="newlispdoc.css" />
</head>

<body style="margin: 20px;" text="#111111" bgcolor="#FFFFFF" 
            link="#376590" vlink="#551A8B" alink="#ffAA28">
<blockquote>
<center><h1>libevent2.lsp</h1></center>
<p><a href="index.html">Module index</a></p><a href="libevent2.lsp.src.html">source</a>&nbsp;<a href="libevent2.lsp">download</a><br/>
<h2>Module:&nbsp;libevent</h2><p>Low-level newlisp bindings for libevent2.</p>
<b>Version: </b>0.1<br/>
<b>Author: </b>Jeff Ober <jeffober@gmail.com><br/>











<br/><br/><center>&sect;</center><br/>
<a name="_init"></a><h3><font color=#CC0000>init</font></h3>
<b>syntax: (<font color=#CC0000>init</font>)</b><br/>
 Initializes the event loop. Will not re-init a previously initialized
 loop unless <em>cleanup</em> is called first.



<br/><br/><center>&sect;</center><br/>
<a name="_run"></a><h3><font color=#CC0000>run</font></h3>
<b>syntax: (<font color=#CC0000>run</font>)</b><br/>
 Starts the event loop. Does not return until the loop is stopped.



<br/><br/><center>&sect;</center><br/>
<a name="_stop"></a><h3><font color=#CC0000>stop</font></h3>
<b>syntax: (<font color=#CC0000>stop</font>)</b><br/>
 Halts the event loop after the next iteration.










<br/><br/><center>&sect;</center><br/>
<a name="_watch"></a><h3><font color=#CC0000>watch</font></h3>
<b>syntax: (<font color=#CC0000>watch</font> <em>fd</em> <em>ev</em> <em>cb</em> <em>once</em>)</b><br/>
<b>parameter: </b><em>int</em> -  <tt>fd</tt>   An open file descriptor<br/>
<b>parameter: </b><em>int</em> -  <tt>ev</tt>   A bitmask of event constants<br/>
<b>parameter: </b><em>fn</em> -   <tt>cb</tt>   A callback function<br/>
<b>parameter: </b><em>bool</em> - <tt>once</tt> When true (default false) callback is triggered only once<br/>
<p><b>return: </b><em>int</em> id used to manage the event watcher</p>
 Registers callback function <em>cb</em> to be called whenever an event masked in
 <em>ev</em> is triggered for <em>fd</em>. <em>cb</em> is called with the file descriptor,
 event, and id as its arguments.
<br/><br/>
<b>Example:</b><blockquote><pre> (watch socket (| READ WRITE)
   (fn (fd e)
     (cond
       (== e READ) (...)
       (== e WRITE) (...))))</pre></blockquote>
<br/><br/><center>&sect;</center><br/>
<a name="_unwatch"></a><h3><font color=#CC0000>unwatch</font></h3>
<b>syntax: (<font color=#CC0000>unwatch</font> <em>id</em>)</b><br/>
<b>parameter: </b><em>int</em> - <tt>id</tt> ID returned by <em>watch</em><br/>
 Unregisters an event watcher. Once unwatched, the watcher id is invalid
 and may no longer be used.
<br/><br/>
<b>Example:</b><blockquote><pre> (watch socket WRITE
   (lambda (fd e id)
     (unwatch id)
     (write fd "Hello world")))</pre></blockquote>
<br/><br/><center>&sect;</center><br/>
<a name="_watch-once"></a><h3><font color=#CC0000>watch-once</font></h3>
<b>syntax: (<font color=#CC0000>watch-once</font> <em>fd</em> <em>ev</em> <em>cb</em>)</b><br/>
<b>parameter: </b><em>int</em> - <tt>fd</tt> An open file descriptor<br/>
<b>parameter: </b><em>int</em> - <tt>ev</tt> A bitmask of event constants<br/>
<b>parameter: </b><em>fn</em> -  <tt>cb</tt> A callback function<br/>
 Registers a callback <em>cb</em> for events <em>ev</em> on descriptor <em>fd</em>. After the
 callback is triggered, it is automatically unregistered for events <em>ev</em>.
 For example, the example code from <em>unwatch</em> could be rewritten as:
<br/><br/>
<b>Example:</b><blockquote><pre> (once socket WRITE
   (lambda (fd e)
     (write fd "Hello world")))</pre></blockquote>
<br/><br/><center>&sect;</center><br/>
<a name="_interval"></a><h3><font color=#CC0000>interval</font></h3>
<b>syntax: (<font color=#CC0000>interval</font> <em>msec</em> <em>cb</em>)</b><br/>
<b>parameter: </b><em>int</em> - <tt>msec</tt> Millisecond interval<br/>
<b>parameter: </b><em>fn</em> -  <tt>cb</tt>   A callback function<br/>
<p><b>return: </b><em>int</em> Returns the timer id</p>

<br/><br/><center>&sect;</center><br/>
<a name="_clear-interval"></a><h3><font color=#CC0000>clear-interval</font></h3>
<b>syntax: (<font color=#CC0000>clear-interval</font> <em>id</em>)</b><br/>
<b>parameter: </b><em>int</em> - <tt>id</tt> id of a timer event<br/>

<br/><br/><center>&sect;</center><br/>
<a name="_after"></a><h3><font color=#CC0000>after</font></h3>
<b>syntax: (<font color=#CC0000>after</font> <em>msec</em> <em>cb</em>)</b><br/>
<b>parameter: </b><em>int</em> - <tt>msec</tt> Millisecond interval<br/>
<b>parameter: </b><em>fn</em> -  <tt>cb</tt>   A callback function<br/>
<p><b>return: </b><em>int</em> Returns the timer id</p>







<br/><br/><center>- &part; -</center><br/>
<center><font face='Arial' size='-2' color='#444444'>
generated with <a href="http://newlisp.org">newLISP</a>&nbsp;
and <a href="http://newlisp.org/newLISPdoc.html">newLISPdoc</a>
</font></center>
</blockquote>
</body>
</html>
